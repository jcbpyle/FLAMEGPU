<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet Type="text/xsl" href="FLAMEGPU_vcproj.xslt"?>

<exp:Experimentation xmlns:exp="https://jcbpyle.github.io/XMMLExperiment" xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU" xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
    <exp:InitialStates baseDirectory="iterations">
        <exp:InitialStateFile>
            <exp:FileName>0</exp:FileName>
            <exp:Location>iterations</exp:Location>
        </exp:InitialStateFile>
        <exp:InitialStateGenerator>
            <exp:GeneratorName>rfg_test</exp:GeneratorName>
            <exp:Files>
                <exp:InitialFileName>0</exp:InitialFileName>
                <exp:Prefix>
                    <exp:Delimiter>_</exp:Delimiter>
                    <exp:AltersWith>RAND_SEED</exp:AltersWith>
                    <exp:AltersWith>INIT_POPULATION</exp:AltersWith>
                </exp:Prefix>
            </exp:Files>
            <exp:Globals>
                <exp:Global>
                    <exp:Name>RAND_SEED</exp:Name>
                    <exp:Value>
                        <exp:Range>
                            <exp:Min>0</exp:Min>
                            <exp:Max>1499</exp:Max>
                        </exp:Range>
                    </exp:Value>
                    <exp:Type>int</exp:Type>
                </exp:Global>
                <exp:Global>
                    <exp:Name>INIT_POPULATION</exp:Name>
                    <exp:Value>
                        <exp:Range>
                            <exp:Min>1</exp:Min>
                            <exp:Max>5</exp:Max>
                        </exp:Range>
                    </exp:Value>
                    <exp:Type>int</exp:Type>
                </exp:Global>
            </exp:Globals>
            <exp:Populations>
                <exp:Population>
                    <exp:Agent>Agent</exp:Agent>                                 
                    <exp:State>default</exp:State>
                    <exp:InitialPopulationCount>
                        <exp:FixedValue>10</exp:FixedValue>
                    </exp:InitialPopulationCount>                                   
                    <exp:Variables>                                         
                        <exp:Variable>
                            <exp:Name>currentEdge</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>int</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>nextEdge</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>int</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>nextEdgeRemainingCapacity</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>int</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>hasIntent</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>bool</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>position</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>distanceTravelled</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>blockedIterationCount</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>int</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>speed</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>x</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>y</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>z</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                        <exp:Variable>
                            <exp:Name>colour</exp:Name>
                            <exp:Value>
                                <exp:FixedValue>1.0</exp:FixedValue>
                                <exp:Type>float</exp:Type>
                            </exp:Value>
                        </exp:Variable>
                    </exp:Variables>
                </exp:Population>
            </exp:Populations>
        </exp:InitialStateGenerator>
    </exp:InitialStates>

    <exp:ExperimentSet>
        <exp:Experiment>
            <exp:ExperimentName>testing_rfg_different_seeds</exp:ExperimentName>
            <exp:Model>
                <exp:ExecutableLocation>../../bin/x64/Release_Console/</exp:ExecutableLocation>
                <exp:ModelName>RestrictedFlowGraph</exp:ModelName>
            </exp:Model>
            <exp:InitialState>
                <exp:Location>iterations</exp:Location>
            </exp:InitialState>
            <exp:SimulationOutput>
                <exp:Location>iterations</exp:Location>
                <exp:FileName>100.xml</exp:FileName>
            </exp:SimulationOutput>
            <exp:Configuration>
                <exp:ExperimentVariables>
                    <exp:Variable>
                        <exp:Name>test_var</exp:Name>
                        <exp:Type>int</exp:Type>
                        <exp:Value>100</exp:Value>
                    </exp:Variable>
                </exp:ExperimentVariables>
                <exp:ExperimentFunctions>
                    <exp:Function>
                        <exp:Name>process_output</exp:Name>
                        <exp:Arguments>
                            <exp:Argument>test_var</exp:Argument>
                        </exp:Arguments>
                        <exp:Returns>
                            <exp:Return>some_variable</exp:Return>
                        </exp:Returns>
                    </exp:Function>
                    <exp:Function>
                        <exp:Name>save_output</exp:Name>
                        <exp:Arguments>
                            <exp:Argument>test_var</exp:Argument>
                        </exp:Arguments>
                        <exp:GlobalVariables>
                            <exp:Global>global_variable</exp:Global>
                        </exp:GlobalVariables>
                    </exp:Function>
                </exp:ExperimentFunctions>
                <exp:Iterations>100</exp:Iterations>
                <exp:Repeats>1</exp:Repeats>
            </exp:Configuration>
        </exp:Experiment>
    </exp:ExperimentSet>
</exp:Experimentation>